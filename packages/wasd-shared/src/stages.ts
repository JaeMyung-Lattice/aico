import type { TileMap, ObstacleConfig } from './types.js'

// Stage 1-3: 20x15 타일맵, Stage 4-5: 25x15 확장 타일맵
// 0=EMPTY, 1=WALL, 2=COIN, 3=START, 4=GOAL

// Stage 1: Tutorial (5 coins)
const STAGE_1: TileMap = [
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
  [1,3,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,1,0,0,0,0,0,0,0,2,0,0,0,0,1],
  [1,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,2,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,1],
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
]

// Stage 2: Intermediate (8 coins)
const STAGE_2: TileMap = [
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
  [1,3,0,0,2,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,1,0,0,0,0,2,0,0,0,0,1,0,0,1],
  [1,0,1,1,1,0,1,0,0,1,1,1,1,0,0,0,1,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1],
  [1,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,2,0,0,0,0,0,0,1,0,0,0,2,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1],
  [1,0,1,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,2,0,1],
  [1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,0,1],
  [1,0,2,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,1],
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
]

// Stage 3: Hard (10 coins)
const STAGE_3: TileMap = [
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
  [1,3,0,2,0,1,0,0,0,0,0,0,0,1,0,0,2,0,0,1],
  [1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1],
  [1,1,1,0,0,0,0,1,1,0,0,2,0,0,0,1,1,1,0,1],
  [1,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,1],
  [1,0,0,1,1,1,1,0,0,0,1,1,1,0,0,0,0,2,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1],
  [1,2,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,1],
  [1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,1],
  [1,0,0,0,1,0,2,0,0,0,0,0,1,0,0,0,0,1,0,1],
  [1,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,1,0,1],
  [1,1,1,0,0,1,1,1,0,0,1,0,0,1,1,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,1],
  [1,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,1],
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
]

// Stage 4: Expert (14 coins) - 대형 장애물 등장, 25x15 확장 맵
const STAGE_4: TileMap = [
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
  [1,3,0,0,1,0,0,2,0,0,0,0,0,1,0,0,2,0,0,0,0,0,0,0,1],
  [1,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,1],
  [1,0,1,0,0,0,1,1,1,0,0,2,0,0,0,1,1,0,0,0,1,0,2,0,1],
  [1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1],
  [1,0,1,1,1,0,0,0,0,1,1,1,0,0,2,0,0,1,0,0,0,1,1,0,1],
  [1,0,0,0,0,0,2,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1],
  [1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,1,0,0,0,1],
  [1,0,0,0,0,0,0,0,2,0,0,1,0,0,0,0,0,0,2,0,0,0,0,0,1],
  [1,0,0,1,1,0,0,0,0,0,0,1,0,0,2,0,0,0,0,0,1,1,0,0,1],
  [1,2,0,0,0,0,0,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,2,1],
  [1,0,0,0,0,1,0,1,0,0,2,0,0,0,0,0,0,0,0,1,0,0,0,0,1],
  [1,0,0,2,0,1,0,0,0,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,4,1],
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
]

// Stage 5: Master (18 coins) - 밀집 미로 + 다양한 장애물, 25x15 확장 맵
const STAGE_5: TileMap = [
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
  [1,3,0,2,0,1,0,0,2,0,1,0,0,0,2,0,1,0,0,0,0,0,2,0,1],
  [1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1],
  [1,1,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0,1,0,0,0,1,0,0,1],
  [1,0,0,0,0,0,0,1,0,2,0,0,0,0,0,1,0,0,2,0,0,1,0,0,1],
  [1,0,1,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0,0,2,1],
  [1,2,0,0,0,1,0,0,2,0,0,1,0,1,0,0,2,0,0,0,0,0,0,0,1],
  [1,0,0,1,0,0,0,1,1,0,0,0,0,0,0,1,0,0,0,1,0,0,1,0,1],
  [1,0,0,1,0,0,0,0,0,0,1,0,2,0,0,1,0,0,0,0,0,0,1,0,1],
  [1,0,2,0,0,1,0,0,0,1,1,0,0,0,0,0,0,1,0,0,1,0,0,0,1],
  [1,0,0,0,0,1,2,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,2,0,1],
  [1,1,0,1,0,0,0,0,1,0,0,1,0,1,0,0,1,0,0,0,1,0,0,0,1],
  [1,2,0,0,0,0,0,0,1,0,0,0,0,0,0,2,0,0,2,0,0,0,0,0,1],
  [1,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,1],
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
]

export const STAGES: readonly TileMap[] = [STAGE_1, STAGE_2, STAGE_3, STAGE_4, STAGE_5]

// 스테이지별 장애물 설정
const STAGE_3_OBSTACLES: ObstacleConfig[] = [
  {
    id: 'obs-1',
    waypoints: [{ x: 40, y: 136 }, { x: 264, y: 136 }],
    speed: 2,
    size: { width: 16, height: 16 },
  },
  {
    id: 'obs-2',
    waypoints: [{ x: 232, y: 200 }, { x: 456, y: 200 }],
    speed: 1.5,
    size: { width: 16, height: 16 },
  },
  {
    id: 'obs-3',
    waypoints: [{ x: 104, y: 392 }, { x: 520, y: 392 }],
    speed: 2.5,
    size: { width: 16, height: 16 },
  },
]

// Stage 4: 대형 장애물 (32x16) 등장, 25x15 확장 맵
const STAGE_4_OBSTACLES: ObstacleConfig[] = [
  // 상단 통로 빠른 순찰
  {
    id: 'obs-1',
    waypoints: [{ x: 104, y: 136 }, { x: 648, y: 136 }],
    speed: 2.5,
    size: { width: 16, height: 16 },
  },
  // 중앙 좌측 순찰
  {
    id: 'obs-2',
    waypoints: [{ x: 40, y: 200 }, { x: 360, y: 200 }],
    speed: 2,
    size: { width: 16, height: 16 },
  },
  // 대형 가로 장애물 (32x16)
  {
    id: 'obs-3',
    waypoints: [{ x: 40, y: 264 }, { x: 296, y: 264 }],
    speed: 1.5,
    size: { width: 32, height: 16 },
  },
  // 우측 순찰
  {
    id: 'obs-4',
    waypoints: [{ x: 392, y: 296 }, { x: 648, y: 296 }],
    speed: 2,
    size: { width: 16, height: 16 },
  },
  // 하단 고속 순찰
  {
    id: 'obs-5',
    waypoints: [{ x: 40, y: 424 }, { x: 600, y: 424 }],
    speed: 3,
    size: { width: 16, height: 16 },
  },
  // 빨간 장애물 추가: 우측 상단 영역 순찰
  {
    id: 'obs-6',
    waypoints: [{ x: 552, y: 72 }, { x: 744, y: 72 }],
    speed: 2,
    size: { width: 16, height: 16 },
  },
  // 빨간 장애물 추가: 중앙 세로 순찰
  {
    id: 'obs-7',
    waypoints: [{ x: 488, y: 168 }, { x: 488, y: 360 }],
    speed: 2.5,
    size: { width: 16, height: 16 },
  },
  // 빨간 장애물 추가: 우측 하단 순찰
  {
    id: 'obs-8',
    waypoints: [{ x: 584, y: 360 }, { x: 744, y: 360 }],
    speed: 2,
    size: { width: 16, height: 16 },
  },
]

// Stage 5: 대형 + 세로 장애물, 최고 난이도, 25x15 확장 맵
const STAGE_5_OBSTACLES: ObstacleConfig[] = [
  // 상단 빠른 소형 순찰
  {
    id: 'obs-1',
    waypoints: [{ x: 40, y: 136 }, { x: 200, y: 136 }],
    speed: 3,
    size: { width: 16, height: 16 },
  },
  // 상단 우측 순찰
  {
    id: 'obs-2',
    waypoints: [{ x: 424, y: 72 }, { x: 712, y: 72 }],
    speed: 2.5,
    size: { width: 16, height: 16 },
  },
  // 중앙 대형 가로 (32x16)
  {
    id: 'obs-3',
    waypoints: [{ x: 200, y: 200 }, { x: 312, y: 200 }],
    speed: 2,
    size: { width: 32, height: 16 },
  },
  // 세로 대형 장애물 (16x32)
  {
    id: 'obs-4',
    waypoints: [{ x: 360, y: 232 }, { x: 360, y: 296 }],
    speed: 1.5,
    size: { width: 16, height: 32 },
  },
  // 하단 좌측 빠른 순찰
  {
    id: 'obs-5',
    waypoints: [{ x: 200, y: 328 }, { x: 392, y: 328 }],
    speed: 3,
    size: { width: 16, height: 16 },
  },
  // 하단 넓은 순찰
  {
    id: 'obs-6',
    waypoints: [{ x: 296, y: 392 }, { x: 712, y: 392 }],
    speed: 2.5,
    size: { width: 16, height: 16 },
  },
  // 최하단 대형 가로 (32x16)
  {
    id: 'obs-7',
    waypoints: [{ x: 168, y: 424 }, { x: 648, y: 424 }],
    speed: 2,
    size: { width: 32, height: 16 },
  },
  // 빨간 장애물 추가: 우측 확장 영역 순찰
  {
    id: 'obs-8',
    waypoints: [{ x: 616, y: 136 }, { x: 744, y: 136 }],
    speed: 2.5,
    size: { width: 16, height: 16 },
  },
  // 빨간 장애물 추가: 우측 중앙 세로 순찰
  {
    id: 'obs-9',
    waypoints: [{ x: 680, y: 200 }, { x: 680, y: 360 }],
    speed: 3,
    size: { width: 16, height: 16 },
  },
  // 빨간 장애물 추가: 확장 영역 하단 가로 순찰
  {
    id: 'obs-10',
    waypoints: [{ x: 520, y: 296 }, { x: 744, y: 296 }],
    speed: 2,
    size: { width: 16, height: 16 },
  },
]

export const STAGE_OBSTACLES: readonly (readonly ObstacleConfig[])[] = [
  [],
  [],
  STAGE_3_OBSTACLES,
  STAGE_4_OBSTACLES,
  STAGE_5_OBSTACLES,
]
